# Unity 2021.2.11
https://unity3d.com/unity/whats-new/2021.2.11

## 2021.2.11f1 Release Notes


### Improvements
<ul>
<li>IL2CPP: Added support for Il2CppSetOption attribute on structs and assemblies.</li>
</ul>

### API Changes
<ul>
<li>Particles: Added: There is a new version of GetTrails that doesn't allocate any garbage. (<a href="https://issuetracker.unity3d.com/issues/particles-particlesystem-dot-gettrails-api-forces-gc-dot-alloc-calls">1394062</a>)</li>
</ul>

### Fixes
<ul>
<li><p>Android: Fixed a Java local reference leak when array is returned when using AndroidJavaObject/AndroidJavaClass. (<a href="https://issuetracker.unity3d.com/issues/android-crashes-with-signal-6-sigabrt-error-and-jni-error-abort-message-on-some-devices-running-android-8-or-lower">1374806</a>)</p></li>
<li><p>Android: Fixed an app crashing when calling Cursor.visible or Cursor.SetCursor many time during a frame. (<a href="https://issuetracker.unity3d.com/issues/android-addressables-player-crashes-with-a-jni-error-error-when-built-on-android">1380363</a>)</p></li>
<li><p>Animation: Fixed a crash when modifying an animation override controller which was in use during a state machine enter / exit behavior callback. (<a href="https://issuetracker.unity3d.com/issues/crash-on-libunity-dot-animationclip-getruntimeasset-when-an-animation-is-played">1346587</a>)</p></li>
<li><p>Build Pipeline: Fixed an issue where subsequent builds or manually-selected script only builds could result in incorrect code stripping. (<a href="https://issuetracker.unity3d.com/issues/assemblies-are-stripped-incorrectly-when-making-a-second-consecutive-development-build">1388491</a>)</p></li>
<li><p>Core: Fixed incorrect handling of C#'s <code>readonly</code> keyword in the JobsDebugger. (1367166)</p></li>
<li><p>Editor: Fixed a Null reference exception on enabling constrain proportions scale for a freshly created Rect Transform object. (<a href="https://issuetracker.unity3d.com/issues/clicking-scale-constraint-button-on-2d-object-throws-nullreferenceexception">1399997</a>)</p></li>
<li><p>Editor: Fixed an issue where  selecting a scene template modified its dependencies.</p></li>
<li><p>Editor: Fixed an issue where keyUp events were never received in the macOS editor under playmode. (<a href="https://issuetracker.unity3d.com/issues/macos-keyboard-input-keys-sticky-and-get-stuck-axis-when-low-frame-rate-on-macos">1380143</a>)</p></li>
<li><p>GI: Fixed an issue  where environment lighting from an additively loaded scene would be ignored, when unloading the base scene, and that scene contains a light probe group. (<a href="https://issuetracker.unity3d.com/issues/previously-loaded-scenes-ambient-light-is-applied-to-a-gameobject-when-loading-a-scene-with-loadscene-additive">1324966</a>)</p></li>
<li><p>Graphics: Fixed a particles flickering issue on metal. (<a href="https://issuetracker.unity3d.com/issues/particle-system-uses-incorrect-transform-matrices-for-motion-vectors-when-shadow-casting-is-enabled">1375960</a>)</p></li>
<li><p>IL2CPP: Implement the internal SetLastWin32Error method. This is used in the CriticalHandle implementation and can cause problems for libraries like Mono.Data.SqlLite. (<a href="https://issuetracker.unity3d.com/issues/android-il2cpp-android-sqlite-exceptions-when-built-with-il2cpp">1379079</a>)</p></li>
<li><p>IL2CPP: Fixed "Attempted to lookup type that hasn't been created" error when building a UWP project. (<a href="https://issuetracker.unity3d.com/issues/exception-unity-dot-il2cpp-dot-building-dot-builderfailedexception-error-during-build-when-vungle-sdk-is-included-in-the-project">1390521</a>)</p></li>
<li><p>IL2CPP: Fixed an IL2CPP crash caused by High managed code stripping producing invalid IL. (<a href="https://issuetracker.unity3d.com/issues/il2cpp-build-fails-when-managed-stripping-level-is-set-to-high">1358995</a>)</p></li>
<li><p>IL2CPP: Fixed an issue where the Visual Studio Build Tools installations was not detected nor used.</p></li>
<li><p>iOS: Fixed an issue where the et On Demand Resources setting in XCode project was not always set to the value in Unity Player Settings. (<a href="https://issuetracker.unity3d.com/issues/ios-player-setting-use-on-demand-resources-does-not-set-the-xcode-build-setting-enable-on-demand-resources">1379736</a>)</p></li>
<li><p>Kernel: Added additional checks to <code>FileUtil.DeleteFileOrDirectory</code> to fix unintentional deletion of project assets directory. (<a href="https://issuetracker.unity3d.com/issues/fileutil-dot-deletefileordirectory-deletes-the-entire-project-folder-when-it-is-passed-a-null-value">1382446</a>)</p></li>
<li><p>Package Manager: Fixed an issue where Unity terminated with error code 0 when an exception occurs while importing a package in bach mode. (<a href="https://issuetracker.unity3d.com/issues/unity-terminates-with-error-code-0-when-an-exception-occurs-while-importing-a-package-in-bach-mode">1375776</a>)</p></li>
<li><p>Particles: Fixed an issue where there was incorrect Collider information for GetTriggerParticles, in the case where there were null colliders in the Trigger Module list. (<a href="https://issuetracker.unity3d.com/issues/particlesystem-dot-colliderdata-dot-getcollider-returns-null-when-a-collider-is-hit-by-particle-system-particles">1356510</a>)</p></li>
<li><p>Physics: Fixed an issue where re-parenting an inactive 2D Collider using a CompositeCollider2D on the target hierarchy would not use the composite. (<a href="https://issuetracker.unity3d.com/issues/warning-message-appears-when-adding-child-gameobject-with-a-collider-into-compositecollider2d-with-a-script">1386399</a>)</p></li>
<li><p>Prefabs: Fixed a RootGameObject detection issue for missing Prefab instances to avoid creating placeholders.</p></li>
<li><p>Prefabs: Fixed a scene saving for scene backups issue when entering PlayMode to re-enable EnterPlay mode with missing Prefab instances in the scene. (1379408)</p></li>
<li><p>Prefabs: Fixed an error that was thrown when merging changes made to a Prefab into a Nested Prefab with co-dependant components. (<a href="https://issuetracker.unity3d.com/issues/changes-fail-when-merging-from-prefab-to-nested-prefab-with-co-related-components">1362574</a>)</p></li>
<li><p>Profiler: Fixed "Call Stacks" toggle in Profiler Window enabling callstacks capturing in connected Players. (<a href="https://issuetracker.unity3d.com/issues/profiler-profilers-call-stacks-button-gets-out-of-sync-with-playerconnection-when-its-toggled-after-connecting-to-player">1377934</a>)</p></li>
<li><p>Serialization: Fixed an issue where error message did not include filename when serialized map in a YAML file was badly formed. (<a href="https://issuetracker.unity3d.com/issues/unexpected-node-type-error-appear-when-reimporting-assemblies">1374218</a>)</p></li>
<li><p>Shaders: Added the number of skipped shader variants to the shader compilation log output. (1389276)</p></li>
<li><p>Shaders: Fixed a misleading comment in UnityCG.cginc. (<a href="https://issuetracker.unity3d.com/issues/comment-on-unityworldspaceviewdir-in-unitycg-dot-cginc-does-not-match-the-function-behavior">1374639</a>)</p></li>
<li><p>Shaders: Fixed an issue where the shader name was not added to the error description when failing to compile or link GLSL shaders. (1378687)</p></li>
<li><p>Shaders: Fixed OOM crash when preparing shaders with a large amount of variants (100M+) for compilation. IPreprocessShaders now processes not more than 1M variants at a time. (<a href="https://issuetracker.unity3d.com/issues/shader-stripping-crashes-when-it-gets-too-many-variants">1388530</a>)</p></li>
<li><p>Shaders: Fixed the output of "Compile and show code" button being capped to 2GB on Windows. (<a href="https://issuetracker.unity3d.com/issues/on-windows-preprocessed-lit-dot-shader-file-stops-mid-line-when-file-size-is-near-or-more-than-2gb">1378000</a>)</p></li>
<li><p>UI Toolkit: Fixed a UIDocument sort order issue when multiple ones had the same sort order value but some of them were disabled. (<a href="https://issuetracker.unity3d.com/issues/the-sort-order-of-a-previously-enabled-uidocument-is-not-respected-when-enabling-a-uidocument-with-lower-sort-order">1378182</a>)</p></li>
<li><p>UI Toolkit: Fixed an issue where the icon in the Uxml preview header would not open the uxml file in the IDE (UI Builder).</p></li>
<li><p>UI Toolkit: Fixed an issue where the <code>Open With IDE</code> context menu was trying to open the uxml in the builder instead of opening it in the IDE (UI Builder). (<a href="https://issuetracker.unity3d.com/issues/open-in-ide-opens-the-file-in-ui-builder">1368373</a>)</p></li>
<li><p>VFX Graph: Fixed a collision with depth buffer issue when using a physical camera. (<a href="https://issuetracker.unity3d.com/issues/vfx-graph-particles-do-not-collide-with-depth-buffer-when-physical-camera-is-used">1344733</a>)</p></li>
<li><p>WebGL: Fixed a MSAA effect issue for WebGL. (<a href="https://issuetracker.unity3d.com/issues/webgl-msaa-effect-is-not-applied-in-build">1377547</a>)</p></li>
<li><p>WebGL: Fixed a template issue when quotation marks were used in company name or product name. (<a href="https://issuetracker.unity3d.com/issues/webgl-player-is-stuck-on-the-gray-screen-when-company-name-includes-quotation-mark">1370946</a>)</p></li>
<li><p>WebGL: Fixed an issue that prevented PlayerSettings.WebGL.emscriptenArgs options from being passed to the build. (<a href="https://issuetracker.unity3d.com/issues/playersettings-dot-webgl-dot-emscriptenargs-regressed-with-incremental-player-build-on-webgl">1368914</a>)</p></li>
<li><p>WebGL: Fixed an issue with the creation of external debug symbols. (<a href="https://issuetracker.unity3d.com/issues/webgl-webgl-builds-fail-if-embedded-debug-symbols-option-is-used">1378286</a>)</p></li>
<li><p>Windows: Fixed an issue when building generated IL2CPP C++ code with Visual Studio 2022 Unity did not correctly recognize it as "Visual Studio 2022". (<a href="https://issuetracker.unity3d.com/issues/incremental-build-pipeline-recognizes-visual-studio-2022-as-vs-unknown">1378085</a>)</p></li>
</ul>

### Package changes in 2021.2.11f1

### Packages updated
<ul>
<li><p>com.unity.addressables: <a href="https://docs.unity3d.com/Packages/com.unity.addressables@1.19//changelog/CHANGELOG.html">1.19.15</a> → <a href="https://docs.unity3d.com/Packages/com.unity.addressables@1.19//changelog/CHANGELOG.html">1.19.17</a></p></li>
<li><p>com.unity.cinemachine: <a href="https://docs.unity3d.com/Packages/com.unity.cinemachine@2.8//changelog/CHANGELOG.html">2.8.3</a> → <a href="https://docs.unity3d.com/Packages/com.unity.cinemachine@2.8//changelog/CHANGELOG.html">2.8.4</a></p></li>
<li><p>com.unity.ide.visualstudio: <a href="https://docs.unity3d.com/Packages/com.unity.ide.visualstudio@2.0//changelog/CHANGELOG.html">2.0.12</a> → <a href="https://docs.unity3d.com/Packages/com.unity.ide.visualstudio@2.0//changelog/CHANGELOG.html">2.0.14</a></p></li>
</ul>

#### Packages added
<ul>
<li><p><a href="https://docs.unity3d.com/Packages/com.unity.sysroot@1.0//changelog/CHANGELOG.html">com.unity.sysroot@1.0.0</a></p></li>
<li><p><a href="https://docs.unity3d.com/Packages/com.unity.sysroot.linux-x86_64@1.0//changelog/CHANGELOG.html">com.unity.sysroot.linux-x86_64@1.0.0</a></p></li>
<li><p><a href="https://docs.unity3d.com/Packages/com.unity.toolchain.linux-x86_64@1.0//changelog/CHANGELOG.html">com.unity.toolchain.linux-x86_64@1.0.0</a></p></li>
<li><p><a href="https://docs.unity3d.com/Packages/com.unity.toolchain.macos-x86_64-linux-x86_64@1.0//changelog/CHANGELOG.html">com.unity.toolchain.macos-x86_64-linux-x86_64@1.0.0</a></p></li>
<li><p><a href="https://docs.unity3d.com/Packages/com.unity.toolchain.win-x86_64-linux-x86_64@1.0//changelog/CHANGELOG.html">com.unity.toolchain.win-x86_64-linux-x86_64@1.0.0</a></p></li>
</ul>
