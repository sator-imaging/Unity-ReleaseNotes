# Unity 2021.3.1
https://unity3d.com/unity/whats-new/2021.3.1

## 2021.3.1f1 Release Notes


### Improvements
<ul>
<li>Version Control: Added support for TLSv1.2 connections to Perforce servers. The Plugin is now using Perforce API v17.2. (1404016)</li>
</ul>

### API Changes
<ul>
<li><p>Android: Changed: Rename TouchScreenKeyboard.Android.closeKeyboardOnOutsideTap to TouchScreenKeyboard.Android.consumesOutsideTouches. (1400608)</p></li>
<li><p>Editor: Removed: Made Il2CppEagerStaticClassConstructionAttribute internal to avoid conflicts with other definitions outside of the package.</p></li>
</ul>

### Fixes
<ul>
<li><p>Android: Fixed a crash caused by out of memory on Android when using Vulkan. (<a href="https://issuetracker.unity3d.com/issues/android-crash-with-signal-11-caused-by-null-pointer-dereference-on-android-device-when-using-vulkan-graphics-api">1394782</a>)</p></li>
<li><p>Asset Pipeline: Fixed an issue where assets with dependencies on a script might not get updated correctly if a [FormerlySerializedAs] attribute was added. (<a href="https://issuetracker.unity3d.com/issues/prefab-is-not-reimported-when-formerlyserializedas-is-added-to-script">1405215</a>)</p></li>
<li><p>Editor: Fixed ActiveTrackers not being correctly updated when Inspector Locked or in Debug mode, leading to incorrect Gizmo behaviors.</p></li>
<li><p>Editor: Fixed Scene.isSubScene flag not persistent in some cases when reloading an open scene. (<a href="https://issuetracker.unity3d.com/issues/scene-dot-issubscene-flag-does-not-persist-for-currently-opened-scenes-when-the-editor-is-restarted">1396151</a>)</p></li>
<li><p>GI: Fixed terrain with holes that could be wronfully ignored by the lightmapper. (<a href="https://issuetracker.unity3d.com/issues/users-terrain-object-with-holes-doesnt-get-a-lightmap-generated-whereas-its-copy-without-holes-gets-a-lightmap-generated">1384239</a>)</p></li>
<li><p>Graphics: Fixed a crash in Vulkan backend when out of GPU memory. (<a href="https://issuetracker.unity3d.com/issues/hdrp-vulkan-crash-on-vk-databuffer-createresource-on-opening-shader-graph-sample-project-with-vulkan-api">1225488</a>)</p></li>
<li><p>Graphics: Fixed a crash in Vulkan backend when running out of GPU memory while building asset bundles on AMD GPUs. (<a href="https://issuetracker.unity3d.com/issues/linux-vulkan-editor-crashes-due-to-memory-leak-when-building-assetbundles">1385669</a>)</p></li>
<li><p>Graphics: Fixed a RenderTexture with randomWrite (UAV) that has dynamic resolution enabled with Vulkan. (1366269)</p></li>
<li><p>Graphics: Fixed a Vulkan validation error when using dynamic resolution with Vulkan on some drivers. (1367535)</p></li>
<li><p>Graphics: Fixed Vulkan validation error when creating a 3D RenderTexture with mip maps. (1367999)</p></li>
<li><p>IL2CPP: Fixed a byte to integer conversions issue when they happen across basic blocks (e.g. inside the ternary operator). (<a href="https://issuetracker.unity3d.com/issues/ternary-operation-with-implicit-type-conversion-from-byte-returns-incorrect-value-when-the-operation-is-done-in-webgl-build">1382752</a>)</p></li>
<li><p>IL2CPP: Fixed an issue where the UnityLinker would generated duplicate unresolved method stubs for a method that was referenced twice via two different method references. (<a href="https://issuetracker.unity3d.com/issues/il2cpp-build-fails-when-project-includes-system-dot-drawing-dot-common-dot-dll">1376513</a>)</p></li>
<li><p>IL2CPP: Fixed RuntimeInformation.IsOSPlatform on desktop platforms issue. (<a href="https://issuetracker.unity3d.com/issues/windows-fails-to-identify-as-windows-when-building-the-project-using-il2cpp-scripting-backend">1399596</a>)</p></li>
<li><p>Input: Fixed editor shortcuts on macOS not respecting keyboard layout. (<a href="https://issuetracker.unity3d.com/issues/editor-shortucts-on-macos-do-not-respect-keyboard-layout">1380906</a>)</p></li>
<li><p>Networking: Fixed an issue where UnityTLS client API did not correctly validate certificates. (1413222)</p></li>
<li><p>Particles: Fixed particle rendering from command buffers. (<a href="https://issuetracker.unity3d.com/issues/particle-system-is-not-rendering-when-commandbuffer-dot-drawrenderer-is-used-with-scriptablerenderpass">1263019</a>, <a href="https://issuetracker.unity3d.com/issues/shuriken-particlesystem-is-not-rendered-into-a-texture-when-using-a-commandbuffer">1273221</a>, <a href="https://issuetracker.unity3d.com/issues/particle-system-doesnt-get-rendered-into-a-texture-when-using-a-commandbuffer">1289755</a>)</p></li>
<li><p>Profiler: Fixed reported "system used memory" in Profiler and Profiler Counter to be closer to system tools reported values. (1383173)</p></li>
<li><p>Scene/Game View: Fixed bug with hiding overlays in overlay toolbar hiding entirely the toolbar.</p></li>
<li><p>Shaders: Fixed a missing eye index setup macro in surface shader. (<a href="https://issuetracker.unity3d.com/issues/xr-built-in-rp-surface-shader-unity-setup-stereo-eye-index-post-vertex-is-missing-from-custom-surface-shader">1406798</a>)</p></li>
<li><p>Shaders: Fixed an issue where there was a missing buildTarget property in the ShaderCompilerData struct. (<a href="https://issuetracker.unity3d.com/issues/no-way-to-get-the-requested-build-target-from-ipreprocessshaders-callback">1403750</a>)</p></li>
<li><p>Shaders: Fixed incorrect batching for shadow casters when shaders have properties affecting fixed-function state. (<a href="https://issuetracker.unity3d.com/issues/shaders-controlling-cull-mode-via-a-property-get-incorrectly-rendered-in-the-shadow-caster-pass">1328077</a>)</p></li>
<li><p>UI Toolkit: Fixed hierarchy change during a layout calculation may cause a crash. (1402253)</p></li>
<li><p>UI Toolkit: Fixed static initialization errors around VisualElement instances. (1394597)</p></li>
<li><p>URP: Fixed Android Vulkan issues with depth prepass and copy depth pass. (1386503)</p></li>
<li><p>Web: Fixed mouse positions in the MouseMove handler in the new input system based on the mouse event. MouseUp and MouseMove events are relative to the window object, whereas MouseDown and Wheel events are relative to the canvas object. (<a href="https://issuetracker.unity3d.com/issues/mouse-position-is-offset-when-mouse-scrolling-in-webgl-build">1385365</a>)</p></li>
</ul>

### Package changes in 2021.3.1f1

### Packages updated
<ul>
<li><p>com.unity.mathematics: <a href="https://docs.unity3d.com/Packages/com.unity.mathematics@1.2//changelog/CHANGELOG.html">1.2.5</a> → <a href="https://docs.unity3d.com/Packages/com.unity.mathematics@1.2//changelog/CHANGELOG.html">1.2.6</a></p></li>
<li><p>com.unity.learn.iet-framework: <a href="https://docs.unity3d.com/Packages/com.unity.learn.iet-framework@2.1//changelog/CHANGELOG.html">2.1.1</a> → <a href="https://docs.unity3d.com/Packages/com.unity.learn.iet-framework@2.2//changelog/CHANGELOG.html">2.2.1</a></p></li>
<li><p>com.unity.learn.iet-framework.authoring: <a href="https://docs.unity3d.com/Packages/com.unity.learn.iet-framework.authoring@1.0//changelog/CHANGELOG.html">1.0.0</a> → <a href="https://docs.unity3d.com/Packages/com.unity.learn.iet-framework.authoring@1.0//changelog/CHANGELOG.html">1.0.2</a></p></li>
</ul>

#### Packages added
<ul>
<li><p><a href="https://docs.unity3d.com/Packages/com.unity.collections@1.2//changelog/CHANGELOG.html">com.unity.collections@1.2.3</a></p></li>
<li><p><a href="https://docs.unity3d.com/Packages/com.unity.transport@1.0//changelog/CHANGELOG.html">com.unity.transport@1.0.0</a></p></li>
</ul>
